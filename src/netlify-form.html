<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test Netlify form</title>
</head>
<body>
    <form name="contact" netlify-honeypot="bot-field" action="thank-you" netlify>
        <p class="hidden">
            <label>Don’t fill this out: <input name="bot-field"></label>
        </p>
        <p>
          <label>Vardas: <input type="text" name="Vardas"></label>   
        </p>
        <p>
          <label>Pavardė: <input type="text" name="Pavardė"></label>   
          </p>
        <p>
          <label>El.pašto adresas: <input type="email" name="Elpaštas"></label>
        </p>
        <p>
            <label>Tel.nr.: <input type="email" name="Telefonas"></label>
          </p>
        <p>
            <label>Įmonė: <input type="text" name="Įmonė"></label>
        </p>
        <p>
          <button type="submit" id="sendForm">Send</button>
        </p>
      </form>

<script>

var submitBtn = document.getElementById('sendForm')           
submitBtn.addEventListener('click', function(e){
  e.preventDefault()
  sendForm()
})

function sendForm(){
  console.log('sendForm');
  var forma = document.getElementsByName('contact')
  var formData = new FormData(forma);
  
    var xhr = new XMLHttpRequest()
    xhr.open('POST', forma[0].action)
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
    xhr.send(formData)

    // Callback function
    xhr.onloadend = function (response) {
        if (response.target.status === 0) {

            // Failed XmlHttpRequest should be considered an undefined error.
            formStatus.className += ' alert-danger'
            formStatus.innerHTML = 'Status 0'

        } else if (response.target.status === 400) {

            // Bad Request
            formStatus.className += ' alert-danger'
            formStatus.innerHTML = JSON.parse(response.target.responseText).error

        } else if (response.target.status === 200) {

            // Success
            formStatus.className += ' alert-success'
            submitBtn.value = 'Status 200' + JSON.parse(response.target.responseText)
            console.log(response)

        }
      }
}
</script>
</body>
</html>